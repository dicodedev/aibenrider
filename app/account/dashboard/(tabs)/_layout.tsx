import { Tabs } from "expo-router";
import React from "react";
import { Text, View } from "react-native";

import Svg, { Path } from "react-native-svg";
import { useSelector } from "react-redux";

export default function TabLayout() {
  const app = useSelector((state: any) => state.app);

  // console.log("go back", router.canGoBack());

  return (
    <View
      style={{
        flex: 1,
      }}
    >
      <Tabs
        screenOptions={{
          headerShown: false,
          tabBarShowLabel: false,
          tabBarStyle: {
            backgroundColor: "#000",
            // gap: 20,
            paddingTop: 30,
            height: 100,
            paddingHorizontal: 15,
          },
        }}
      >
        <Tabs.Screen
          name="index"
          options={{
            tabBarIcon: ({ focused }) => (
              <CustomTab
                focused={focused}
                text={"Home"}
                icon={
                  focused ? (
                    <Svg width="19" height="18" viewBox="0 0 19 18" fill="none">
                      <Path
                        d="M9.91167 0.144039C9.79695 0.0510817 9.65096 0 9.5 0C9.34904 0 9.20305 0.0510817 9.08833 0.144039L0 7.52402V16.2C0 16.6774 0.200178 17.1352 0.556497 17.4728C0.912816 17.8104 1.39609 18 1.9 18H6.96667C7.13464 18 7.29573 17.9368 7.4145 17.8243C7.53327 17.7117 7.6 17.5591 7.6 17.4V13.8C7.6 13.3226 7.80018 12.8648 8.1565 12.5272C8.51282 12.1897 8.99609 12 9.5 12C10.0039 12 10.4872 12.1897 10.8435 12.5272C11.1998 12.8648 11.4 13.3226 11.4 13.8V17.4C11.4 17.5591 11.4667 17.7117 11.5855 17.8243C11.7043 17.9368 11.8654 18 12.0333 18H17.1C17.6039 18 18.0872 17.8104 18.4435 17.4728C18.7998 17.1352 19 16.6774 19 16.2V7.52402L9.91167 0.144039Z"
                        fill="#FBAF41"
                      />
                    </Svg>
                  ) : (
                    <Svg width="19" height="19" viewBox="0 0 19 19" fill="none">
                      <Path
                        d="M7.96944 0.529492C8.39775 0.187542 8.93986 0 9.5 0C10.0601 0 10.6022 0.187542 11.0306 0.529492L18.1556 6.22103C18.6907 6.649 19 7.27795 19 7.94089V17.2501C19 17.7142 18.8054 18.1593 18.459 18.4875C18.1125 18.8156 17.6427 19 17.1528 19H13.4583C12.9684 19 12.4986 18.8156 12.1521 18.4875C11.8057 18.1593 11.6111 17.7142 11.6111 17.2501V12.2435C11.6111 12.1772 11.5833 12.1137 11.5338 12.0668C11.4843 12.0199 11.4172 11.9936 11.3472 11.9936H7.65278C7.58279 11.9936 7.51567 12.0199 7.46618 12.0668C7.41669 12.1137 7.38889 12.1772 7.38889 12.2435V17.2501C7.38889 17.7142 7.19427 18.1593 6.84785 18.4875C6.50143 18.8156 6.03158 19 5.54167 19H1.84722C1.60464 19 1.36444 18.9547 1.14032 18.8668C0.916206 18.7789 0.712569 18.65 0.541039 18.4875C0.369509 18.325 0.233443 18.1321 0.140612 17.9198C0.0477799 17.7075 0 17.4799 0 17.2501V7.94089C0 7.27795 0.309278 6.649 0.844444 6.22103L7.96944 0.529492ZM10.0098 1.6764C9.86711 1.56259 9.68655 1.50018 9.5 1.50018C9.31345 1.50018 9.13289 1.56259 8.99017 1.6764L1.86517 7.36694C1.77699 7.43725 1.70609 7.52495 1.65741 7.62391C1.60873 7.72288 1.58345 7.83071 1.58333 7.93989V17.2491C1.58333 17.3871 1.70156 17.4991 1.84722 17.4991H5.54167C5.61165 17.4991 5.67878 17.4728 5.72826 17.4259C5.77775 17.379 5.80556 17.3154 5.80556 17.2491V12.2425C5.80556 11.2756 6.63311 10.4927 7.65278 10.4927H11.3472C12.3669 10.4927 13.1944 11.2756 13.1944 12.2425V17.2491C13.1944 17.3871 13.3127 17.4991 13.4583 17.4991H17.1528C17.2228 17.4991 17.2899 17.4728 17.3394 17.4259C17.3889 17.379 17.4167 17.3154 17.4167 17.2491V7.93989C17.4165 7.83071 17.3913 7.72288 17.3426 7.62391C17.2939 7.52495 17.223 7.43725 17.1348 7.36694L10.0098 1.6764Z"
                        fill="#9F9F9F"
                      />
                    </Svg>
                  )
                }
              />
            ),
          }}
        />
        <Tabs.Screen
          name="trips"
          options={{
            tabBarIcon: ({ focused }) => (
              <CustomTab
                focused={focused}
                text={"Trips"}
                icon={
                  focused ? (
                    <Svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <Path
                        d="M12.844 18H4.5C3.121 18 2 16.879 2 15.5C2 14.121 3.121 13 4.5 13H11.5C13.43 13 15 11.43 15 9.5C15 7.57 13.43 6 11.5 6H6.639C6.27186 6.71994 5.81707 7.39171 5.285 8H11.5C12.327 8 13 8.673 13 9.5C13 10.327 12.327 11 11.5 11H4.5C2.019 11 0 13.019 0 15.5C0 17.981 2.019 20 4.5 20H14.093C13.6022 19.3828 13.1832 18.7119 12.844 18ZM3 0C1.346 0 0 1.346 0 3C0 6.188 3 8 3 8C3 8 6 6.187 6 3C6 1.346 4.654 0 3 0ZM3 4.5C2.80295 4.49993 2.60785 4.46106 2.42582 4.38559C2.2438 4.31012 2.07842 4.19954 1.93913 4.06016C1.79984 3.92078 1.68937 3.75533 1.61403 3.57325C1.53868 3.39118 1.49993 3.19605 1.5 2.999C1.50007 2.80195 1.53894 2.60685 1.61441 2.42482C1.68988 2.2428 1.80046 2.07742 1.93984 1.93813C2.07922 1.79884 2.24467 1.68837 2.42675 1.61303C2.60882 1.53768 2.80395 1.49893 3.001 1.499C3.39896 1.49913 3.78056 1.65735 4.06187 1.93884C4.34317 2.22033 4.50113 2.60204 4.501 3C4.50087 3.39796 4.34265 3.77956 4.06116 4.06087C3.77967 4.34217 3.39796 4.50013 3 4.5Z"
                        fill="#FBAF41"
                      />
                      <Path
                        d="M17 12C15.346 12 14 13.346 14 15C14 18.188 17 20 17 20C17 20 20 18.187 20 15C20 13.346 18.654 12 17 12ZM17 16.5C16.803 16.4999 16.6078 16.4611 16.4258 16.3856C16.2438 16.3101 16.0784 16.1995 15.9391 16.0602C15.7998 15.9208 15.6894 15.7553 15.614 15.5733C15.5387 15.3912 15.4999 15.196 15.5 14.999C15.5001 14.802 15.5389 14.6068 15.6144 14.4248C15.6899 14.2428 15.8005 14.0774 15.9398 13.9381C16.0792 13.7988 16.2447 13.6884 16.4267 13.613C16.6088 13.5377 16.804 13.4989 17.001 13.499C17.399 13.4991 17.7806 13.6573 18.0619 13.9388C18.3432 14.2203 18.5011 14.602 18.501 15C18.5009 15.398 18.3427 15.7796 18.0612 16.0609C17.7797 16.3422 17.398 16.5001 17 16.5Z"
                        fill="#FBAF41"
                      />
                    </Svg>
                  ) : (
                    <Svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <Path
                        d="M12.844 18H4.5C3.121 18 2 16.879 2 15.5C2 14.121 3.121 13 4.5 13H11.5C13.43 13 15 11.43 15 9.5C15 7.57 13.43 6 11.5 6H6.639C6.27186 6.71994 5.81707 7.39171 5.285 8H11.5C12.327 8 13 8.673 13 9.5C13 10.327 12.327 11 11.5 11H4.5C2.019 11 0 13.019 0 15.5C0 17.981 2.019 20 4.5 20H14.093C13.6022 19.3828 13.1832 18.7119 12.844 18ZM3 0C1.346 0 0 1.346 0 3C0 6.188 3 8 3 8C3 8 6 6.187 6 3C6 1.346 4.654 0 3 0ZM3 4.5C2.80295 4.49993 2.60785 4.46106 2.42582 4.38559C2.2438 4.31012 2.07842 4.19954 1.93913 4.06016C1.79984 3.92078 1.68937 3.75533 1.61403 3.57325C1.53868 3.39118 1.49993 3.19605 1.5 2.999C1.50007 2.80195 1.53894 2.60685 1.61441 2.42482C1.68988 2.2428 1.80046 2.07742 1.93984 1.93813C2.07922 1.79884 2.24467 1.68837 2.42675 1.61303C2.60882 1.53768 2.80395 1.49893 3.001 1.499C3.39896 1.49913 3.78056 1.65735 4.06187 1.93884C4.34317 2.22033 4.50113 2.60204 4.501 3C4.50087 3.39796 4.34265 3.77956 4.06116 4.06087C3.77967 4.34217 3.39796 4.50013 3 4.5Z"
                        fill="#9F9F9F"
                      />
                      <Path
                        d="M17 12C15.346 12 14 13.346 14 15C14 18.188 17 20 17 20C17 20 20 18.187 20 15C20 13.346 18.654 12 17 12ZM17 16.5C16.803 16.4999 16.6078 16.4611 16.4258 16.3856C16.2438 16.3101 16.0784 16.1995 15.9391 16.0602C15.7998 15.9208 15.6894 15.7553 15.614 15.5733C15.5387 15.3912 15.4999 15.196 15.5 14.999C15.5001 14.802 15.5389 14.6068 15.6144 14.4248C15.6899 14.2428 15.8005 14.0774 15.9398 13.9381C16.0792 13.7988 16.2447 13.6884 16.4267 13.613C16.6088 13.5377 16.804 13.4989 17.001 13.499C17.399 13.4991 17.7806 13.6573 18.0619 13.9388C18.3432 14.2203 18.5011 14.602 18.501 15C18.5009 15.398 18.3427 15.7796 18.0612 16.0609C17.7797 16.3422 17.398 16.5001 17 16.5Z"
                        fill="#9F9F9F"
                      />
                    </Svg>
                  )
                }
              />
            ),
          }}
        />
        <Tabs.Screen
          name="wallet"
          options={{
            tabBarIcon: ({ focused }) => (
              <CustomTab
                focused={focused}
                text={"Wallet"}
                icon={
                  focused ? (
                    <Svg width="20" height="18" viewBox="0 0 20 18" fill="none">
                      <Path
                        d="M2.72818 2.38637H16.3691C16.5284 2.38633 16.6876 2.39644 16.8456 2.41664C16.7921 2.04057 16.6629 1.67924 16.4659 1.35444C16.2689 1.02964 16.0082 0.748094 15.6994 0.526783C15.3907 0.305471 15.0403 0.148976 14.6695 0.0667312C14.2986 -0.0155133 13.9149 -0.0218029 13.5416 0.0482412L2.32321 1.96351H2.31043C1.60625 2.09817 0.98004 2.49658 0.559703 3.07737C1.19298 2.62693 1.95105 2.38537 2.72818 2.38637ZM16.3691 3.40944H2.72818C2.00486 3.41023 1.3114 3.69792 0.799937 4.20938C0.288476 4.72084 0.000789831 5.4143 0 6.13762V14.3222C0.000789831 15.0455 0.288476 15.7389 0.799937 16.2504C1.3114 16.7619 2.00486 17.0495 2.72818 17.0503H16.3691C17.0924 17.0495 17.7858 16.7619 18.2973 16.2504C18.8088 15.7389 19.0965 15.0455 19.0972 14.3222V6.13762C19.0965 5.4143 18.8088 4.72084 18.2973 4.20938C17.7858 3.69792 17.0924 3.41023 16.3691 3.40944ZM14.3442 11.594C14.0745 11.594 13.8107 11.514 13.5864 11.3641C13.3621 11.2142 13.1872 11.0012 13.084 10.7519C12.9808 10.5026 12.9537 10.2284 13.0064 9.96377C13.059 9.69916 13.1889 9.4561 13.3797 9.26533C13.5705 9.07456 13.8135 8.94464 14.0781 8.89201C14.3427 8.83937 14.617 8.86639 14.8663 8.96963C15.1155 9.07288 15.3286 9.24771 15.4784 9.47204C15.6283 9.69636 15.7083 9.96009 15.7083 10.2299C15.7083 10.5917 15.5646 10.9386 15.3088 11.1944C15.053 11.4503 14.706 11.594 14.3442 11.594Z"
                        fill="#FBAF41"
                      />
                      <Path
                        d="M0.0214844 9.01496V4.7735C0.0214844 3.84975 0.533018 2.30109 2.30847 1.96561C3.81536 1.68298 5.30733 1.68298 5.30733 1.68298C5.30733 1.68298 6.28777 2.36503 5.47784 2.36503C4.66791 2.36503 4.68923 3.40941 5.47784 3.40941C6.26645 3.40941 5.47784 4.41116 5.47784 4.41116L2.30207 8.01321L0.0214844 9.01496Z"
                        fill="#FBAF41"
                      />
                    </Svg>
                  ) : (
                    <Svg width="20" height="18" viewBox="0 0 20 18" fill="none">
                      <Path
                        d="M16.369 4.09167H2.72814C1.59809 4.09167 0.682007 5.00776 0.682007 6.13781V14.3223C0.682007 15.4524 1.59809 16.3685 2.72814 16.3685H16.369C17.4991 16.3685 18.4152 15.4524 18.4152 14.3223V6.13781C18.4152 5.00776 17.4991 4.09167 16.369 4.09167Z"
                        stroke="#9F9F9F"
                        stroke-width="1.36409"
                        stroke-linejoin="round"
                      />
                      <Path
                        d="M16.1712 4.0916V2.81277C16.1711 2.49912 16.1018 2.18935 15.9682 1.90558C15.8346 1.6218 15.64 1.37101 15.3983 1.1711C15.1566 0.971187 14.8738 0.82708 14.57 0.74906C14.2662 0.67104 13.949 0.661031 13.6409 0.719747L2.4144 2.63587C1.92688 2.72877 1.48706 2.9889 1.1708 3.37138C0.854539 3.75387 0.681671 4.23472 0.682007 4.73102V6.81978"
                        stroke="#9F9F9F"
                        stroke-width="1.36409"
                        stroke-linejoin="round"
                      />
                      <Path
                        d="M14.323 11.5941C14.0532 11.5941 13.7894 11.5141 13.5651 11.3643C13.3408 11.2144 13.1659 11.0013 13.0627 10.7521C12.9595 10.5028 12.9324 10.2285 12.9851 9.96394C13.0377 9.69933 13.1676 9.45627 13.3584 9.2655C13.5492 9.07473 13.7922 8.94481 14.0568 8.89218C14.3214 8.83954 14.5957 8.86656 14.845 8.9698C15.0942 9.07305 15.3073 9.24789 15.4572 9.47221C15.607 9.69653 15.687 9.96027 15.687 10.2301C15.687 10.5918 15.5433 10.9388 15.2875 11.1946C15.0317 11.4504 14.6847 11.5941 14.323 11.5941Z"
                        fill="#9F9F9F"
                      />
                    </Svg>
                  )
                }
              />
            ),
          }}
        />
        <Tabs.Screen
          name="account"
          options={{
            tabBarIcon: ({ focused }) => (
              <CustomTab
                focused={focused}
                text={"Account"}
                icon={
                  focused ? (
                    <Svg width="17" height="21" viewBox="0 0 17 21" fill="none">
                      <Path
                        d="M13.65 10.4382C14.2889 10.4382 14.9016 10.692 15.3533 11.1438C15.805 11.5955 16.0588 12.2082 16.0588 12.8471V13.65C16.0588 16.8152 13.0719 20.0735 8.02941 20.0735C2.98694 20.0735 0 16.8152 0 13.65V12.8471C0 12.2082 0.253786 11.5955 0.705528 11.1438C1.15727 10.692 1.76996 10.4382 2.40882 10.4382H13.65ZM8.02941 0C9.20065 0 10.3239 0.465275 11.1521 1.29347C11.9803 2.12166 12.4456 3.24493 12.4456 4.41618C12.4456 5.58742 11.9803 6.71069 11.1521 7.53889C10.3239 8.36708 9.20065 8.83235 8.02941 8.83235C6.85817 8.83235 5.7349 8.36708 4.9067 7.53889C4.07851 6.71069 3.61324 5.58742 3.61324 4.41618C3.61324 3.24493 4.07851 2.12166 4.9067 1.29347C5.7349 0.465275 6.85817 0 8.02941 0Z"
                        fill="#FBAF41"
                      />
                    </Svg>
                  ) : (
                    <Svg width="17" height="21" viewBox="0 0 17 21" fill="none">
                      <Path
                        d="M13.8004 10.5883C14.4392 10.5883 15.0519 10.842 15.5037 11.2938C15.9554 11.7455 16.2092 12.3582 16.2092 12.9971V13.8C16.2092 16.9652 13.2223 20.2236 8.1798 20.2236C3.13733 20.2236 0.150391 16.9652 0.150391 13.8V12.9971C0.150391 12.3582 0.404177 11.7455 0.855919 11.2938C1.30766 10.842 1.92035 10.5883 2.55921 10.5883H13.8004ZM13.8004 12.1941H2.55921C2.34626 12.1941 2.14203 12.2787 1.99145 12.4293C1.84087 12.5799 1.75627 12.7841 1.75627 12.9971V13.8C1.75627 16.1093 4.0559 18.6177 8.1798 18.6177C12.3037 18.6177 14.6033 16.1093 14.6033 13.8V12.9971C14.6033 12.7841 14.5187 12.5799 14.3682 12.4293C14.2176 12.2787 14.0133 12.1941 13.8004 12.1941ZM8.1798 0.150024C9.35104 0.150024 10.4743 0.615299 11.3025 1.44349C12.1307 2.27169 12.596 3.39496 12.596 4.5662C12.596 5.73744 12.1307 6.86072 11.3025 7.68891C10.4743 8.5171 9.35104 8.98238 8.1798 8.98238C7.00856 8.98238 5.88529 8.5171 5.05709 7.68891C4.2289 6.86072 3.76363 5.73744 3.76363 4.5662C3.76363 3.39496 4.2289 2.27169 5.05709 1.44349C5.88529 0.615299 7.00856 0.150024 8.1798 0.150024ZM8.1798 1.75591C7.43447 1.75591 6.71966 2.05199 6.19262 2.57902C5.66559 3.10606 5.36951 3.82086 5.36951 4.5662C5.36951 5.31154 5.66559 6.02635 6.19262 6.55338C6.71966 7.08041 7.43447 7.3765 8.1798 7.3765C8.92514 7.3765 9.63995 7.08041 10.167 6.55338C10.694 6.02635 10.9901 5.31154 10.9901 4.5662C10.9901 3.82086 10.694 3.10606 10.167 2.57902C9.63995 2.05199 8.92514 1.75591 8.1798 1.75591Z"
                        fill="#9F9F9F"
                        stroke="#9F9F9F"
                        stroke-width="0.3"
                      />
                    </Svg>
                  )
                }
              />
            ),
          }}
        />
      </Tabs>
    </View>
  );
}

const CustomTab = ({
  focused,
  icon,
  text,
}: {
  focused: boolean;
  icon: any;
  text: string;
}) => {
  return (
    <View
      style={{
        backgroundColor: focused ? "#343434" : "#000000",
        justifyContent: "center",
        alignItems: "center",
        height: 70,
        width: 70,
        borderRadius: "100%",
      }}
    >
      {icon}
      <Text
        style={{
          fontFamily: "HostGroteskBold",
          fontSize: 10,
          color: focused ? "#ffffff" : "#9F9F9F",
          marginTop: 5,
          width: "100%",
          textAlign: "center",
        }}
      >
        {text}
      </Text>
    </View>
  );
};
